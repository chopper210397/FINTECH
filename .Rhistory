<<<<<<< Updated upstream
<<<<<<< HEAD
a<-actividad %>% group_by(mes) %>% distinct(numero.de.documento,.keep_all = TRUE)
a %>% count(mes)
View(a)
unique(a$cluster_segment)
a %>% count(mes,cluster_segment)
library(ggplot2)
a %>% count(mes,cluster_segment) %>% ggplot(aes(x=mes,y=n,label=n))+geom_bar(stat = "identity")+geom_text()
a %>% count(mes,cluster_segment) %>% ggplot(aes(x=mes,y=n,label=n))+geom_bar(stat = "identity",position = "dodge")+geom_text()
a %>% count(mes,cluster_segment) %>% ggplot(aes(x=mes,y=n,fill=cluster_segment,label=n))+geom_bar(stat = "identity",position = "dodge")+geom_text()
a %>% count(mes,cluster_segment) %>%
ggplot(aes(x=mes,y=n,fill=cluster_segment,label=n))+
geom_bar(stat = "identity",position = "dodge")+geom_text()
a %>% count(mes,cluster_segment) %>%
ggplot(aes(x=mes,y=n,fill=cluster_segment,label=n))+
geom_bar(stat = "identity",position = "dodge")+geom_text(position = position_dodge(0.7))
a %>% count(mes,cluster_segment) %>%
ggplot(aes(x=mes,y=n,fill=cluster_segment,label=n))+
geom_bar(stat = "identity",position = "dodge")+geom_text(position = position_dodge(width=0.7))
a %>% count(mes,cluster_segment) %>%
ggplot(aes(x=mes,y=n,fill=cluster_segment,label=n))+
geom_bar(stat = "identity",position = "dodge")+geom_text(position = position_dodge(0.9))
a %>% count(mes,cluster_segment)
b<-a %>% count(mes,cluster_segment)
write_xlsx("grafico.xlsx",b)
write_xlsx(b,"grafico.xlsx")
a %>% count(mes,cluster_segment) %>%
ggplot(aes(x=cluster_segment,y=n,fill=mes,label=n))+
geom_bar(stat = "identity",position = "dodge")+geom_text(position = position_dodge(0.9))
a %>% count(mes,cluster_segment) %>%
ggplot(aes(x=cluster_segment,y=n,fill=mes,label=n))+
geom_bar(stat = "identity",position = "dodge")+geom_text()
a %>% count(mes,cluster_segment) %>%
ggplot(aes(x=cluster_segment,y=n,color=mes,label=n))+
geom_bar(stat = "identity",position = "dodge")+geom_text(position = position_dodge(0.9))
a %>% count(mes,cluster_segment) %>%
ggplot(aes(x=cluster_segment,y=n,fill=mes,label=n))+
geom_bar(stat = "identity",position = "dodge")+geom_text(position = position_dodge(0.9))
a %>% count(mes,cluster_segment) %>%
ggplot(aes(x=cluster_segment,y=n,fill=mes,label=n))+
geom_bar(stat = "identity",position = "dodge2")+geom_text(position = position_dodge(0.9))
a %>% count(mes,cluster_segment) %>%
ggplot(aes(x=cluster_segment,y=n,fill=mes,label=n))+
geom_bar(stat = "identity",position = "dodge2")+geom_text()
a %>% count(mes,cluster_segment) %>%
ggplot(aes(x=cluster_segment,y=n,fill=mes,label=n))+
geom_bar(stat = "identity",position = "dodge2")+geom_text(position = position_dodge(0.7))
a %>% count(mes,cluster_segment) %>%
ggplot(aes(x=cluster_segment,y=n,fill=mes,label=n))+
geom_bar(stat = "identity",position = "dodge2")+geom_text(position = position_dodge(0.5))
a %>% count(mes,cluster_segment) %>%
ggplot(aes(x=cluster_segment,y=n,fill=mes,label=n))+
geom_bar(stat = "identity",position = "dodge2")+geom_text(position = position_dodge(width=0.5))
a %>% count(mes,cluster_segment) %>%
ggplot(aes(x=cluster_segment,y=n,fill=as.factor(mes),label=n))+
geom_bar(stat = "identity",position = "dodge2")+geom_text(position = position_dodge(width=0.5))
a %>% count(mes,cluster_segment) %>%
ggplot(aes(x=cluster_segment,y=n,fill=as.factor(mes),label=n))+
geom_bar(stat = "identity",position = "dodge2")+geom_text(position = position_dodge(width=0.9))
a %>% count(mes,cluster_segment) %>%
ggplot(aes(x=cluster_segment,y=n,fill=as.factor(mes),label=n))+
geom_bar(stat = "identity",position = "dodge2")+geom_text(position = position_dodge(0.9))
a %>% filter(mes!=5)%>% count(mes,cluster_segment) %>%
ggplot(aes(x=cluster_segment,y=n,fill=as.factor(mes),label=n))+
geom_bar(stat = "identity",position = "dodge2")+geom_text(position = position_dodge(0.9))
library(scales)
library(readr)
library(readxl)
library(lubridate)
library(dplyr)
library(ggplot2)
library(tidyr)
library(kableExtra)
library(writexl)
# install.packages("writexl")
# historico de llamadas
llamadas<-read_xlsx("voximplant_call_history.xlsx")
View(llamadas)
str(llamadas)
View(llamadas)
range(llamadas$`Date of call start`)
# install.packages("writexl")
# historico de llamadas
llamadas1<-read_xlsx("voximplant_call_history_abril.xlsx")
View(llamadas1)
# install.packages("writexl")
# historico de llamadas
llamadas1<-read_xlsx("voximplant_call_history_abril.xlsx")
# para todo el equipo
# llamadas entrantes por hora
llamadas %>% filter(mes==3) %>% filter(`Is incoming`=="yes") %>% count(hora) %>% ggplot(aes(x=hora,y=n))+geom_bar(stat = "identity",fill="brown")+
scale_x_continuous(n.breaks = 15)+labs(title = "Llamadas entrantes por hora",y="")
# install.packages("writexl")
# historico de llamadas
llamadas<-read_xlsx("voximplant_call_history_abril.xlsx")
# install.packages("writexl")
# historico de llamadas
llamadas<-read_xlsx("voximplant_call_history_abril.xlsx")
View(llamadas)
#
llamadas$`Date of call start`<-as.Date(llamadas$`Date of call start`)
llamadas<-llamadas %>% mutate(mes=month(`Date of call start`))
View(llamadas)
# para todo el equipo
# llamadas entrantes por hora
llamadas %>% filter(mes==4) %>% filter(`Is incoming`=="yes") %>% count(hora) %>% ggplot(aes(x=hora,y=n))+geom_bar(stat = "identity",fill="brown")+
scale_x_continuous(n.breaks = 15)+labs(title = "Llamadas entrantes por hora",y="")
#------ voximplant por hora -------#
llamadas<-read_xlsx("voximplant_call_history_abril.xlsx")
llamadas<-llamadas %>% mutate(mes=month(`Date of call start`))
unique(hour(llamadas$`Date of call start`))
llamadas<-llamadas %>% mutate(hora=hour(llamadas$`Date of call start`))
# para todo el equipo
# llamadas entrantes por hora
llamadas %>% filter(mes==4) %>% filter(`Is incoming`=="yes") %>% count(hora) %>% ggplot(aes(x=hora,y=n))+geom_bar(stat = "identity",fill="brown")+
scale_x_continuous(n.breaks = 15)+labs(title = "Llamadas entrantes por hora",y="")
# llamadas salientes por hora
llamadas %>% filter(mes==4) %>% filter(`Is incoming`=="no") %>% count(hora) %>% ggplot(aes(x=hora,y=n))+geom_bar(stat = "identity",fill="brown")+
scale_x_continuous(n.breaks = 15)+labs(title = "Llamadas salientes por hora", y="")
ggsave("llamadasporhorassalientes.png",dpi = 300)
# para todo el equipo
# llamadas entrantes por hora
llamadas %>% filter(mes==4) %>% filter(`Is incoming`=="yes") %>% count(hora) %>% ggplot(aes(x=hora,y=n))+geom_bar(stat = "identity",fill="brown")+
scale_x_continuous(n.breaks = 15)+labs(title = "Llamadas entrantes por hora",y="")
ggsave("llamadasporhorasentrantes.png",dpi = 300)
# llamadas salientes por hora
llamadas %>% filter(mes==4) %>% filter(`Is incoming`=="no") %>% count(hora) %>% ggplot(aes(x=hora,y=n))+geom_bar(stat = "identity",fill="brown")+
scale_x_continuous(n.breaks = 15)+labs(title = "Llamadas salientes por hora", y="")
ggsave("llamadasporhorassalientes.png",dpi = 300)
View(llamadas)
View(llamadas)
actividad<-read.csv("actividad_contactado.csv",sep = ",")
actividad<-actividad %>% mutate(mes=month(Timestamp))
unicos<-actividad %>%  dplyr::distinct(numero.de.documento,.keep_all = TRUE)
unicos %>% count(mes)
# DATA VOXIMPLANT _sac_ llamadas
library(scales)
library(readr)
library(readxl)
library(lubridate)
library(dplyr)
library(ggplot2)
library(tidyr)
library(kableExtra)
library(writexl)
actividad<-actividad %>% mutate(mes=month(Timestamp))
unicos<-actividad %>%  dplyr::distinct(numero.de.documento,.keep_all = TRUE)
unicos %>% count(mes)
a<-actividad %>% group_by(mes) %>% distinct(numero.de.documento,.keep_all = TRUE)
a %>% filter(mes!=5)%>% count(mes,cluster_segment) %>%
ggplot(aes(x=cluster_segment,y=n,fill=as.factor(mes),label=n))+
geom_bar(stat = "identity",position = "dodge2")+geom_text(position = position_dodge(0.9))
a %>% filter(mes!=5)%>% count(mes,cluster_segment)
knitr::opts_chunk$set(
echo = FALSE,
message = FALSE,
warning = FALSE,
cache=TRUE
)
library(readr)
library(readxl)
library(ggplot2)
library(tidyr)
library(dplyr)
library(kableExtra)
=======
unique(tickets$State)
unique(tickets$Priority)
unique(tickets$Group)
unique(tickets$Owner)
unique(tickets$Customer)
unique(tickets$Organization)
tickets %>% filter(Organization=="NA")
tickets %>% filter(Organization=="")
tickets %>% filter(Organization!="Aflore SAS")
unique(tickets$`Create Channel`)
unique(tickets$Customer)
unique(tickets$Sender)
unique(tickets$Tags)
range(tickets$`Created at`)
str(tickets)
parse_datetime(tickets$`Created at`)
parse_datetime(tickets$`Created at`[1:10])
str(tickets)
# como las fechas estan como carácteres y no date lo convertimos
parse_datetime(tickets$`Created at`)
str(tickets)
# como las fechas estan como carácteres y no date lo convertimos
tickets$`Created at`<-parse_datetime(tickets$`Created at`)
tickets$`Updated at`<-parse_datetime(tickets$`Updated at`)
tickets$`Closed at`<-parse_datetime(tickets$`Closed at`)
str(tickets)
View(tickets)
range(tickets$`Created at`)
max(tickets$`Created at`)
View(tickets)
>>>>>>> 0ec9206f775abc8ba3d986a811a00f3ece3df819
library(lubridate)
library(forcats)
library(stringr)
library(gganimate)
library(plotly)
library(readr)
library(readxl)
library(ggplot2)
library(tidyr)
library(dplyr)
library(kableExtra)
library(lubridate)
library(forcats)
library(stringr)
library(gganimate)
library(plotly)
knitr::opts_chunk$set(
echo = FALSE,
message = FALSE,
warning = FALSE,
cache=TRUE
)
library(readr)
library(readxl)
library(ggplot2)
library(tidyr)
library(dplyr)
library(kableExtra)
library(lubridate)
library(forcats)
library(stringr)
library(gganimate)
library(plotly)
actividad<-read.csv("actividad_contactado.csv",sep = ",")
library(lubridate)
tickets<-read_xls("tickets_abril.xls",skip = 2)
# como las fechas estan como carácteres y no date lo convertimos
tickets$`Created at`<-parse_datetime(tickets$`Created at`)
# como las fechas estan como carácteres y no date lo convertimos
=======
# el title es mas completo que el subgrupo en cuanto a detalles, de preferencia usar el primero, brinda mas data
tickets %>% ggplot(aes(x=reorder(Title,Title,function(x)length(x)),color=mes))+geom_bar()+coord_flip()
# el title es mas completo que el subgrupo en cuanto a detalles, de preferencia usar el primero, brinda mas data
tickets %>% ggplot(aes(x=reorder(Title,Title,function(x)length(x)),fill=mes))+geom_bar()+coord_flip()
# el title es mas completo que el subgrupo en cuanto a detalles, de preferencia usar el primero, brinda mas data
tickets %>% ggplot(aes(x=reorder(Title,Title,function(x)length(x))),fill=mes)+geom_bar()+coord_flip()
# el title es mas completo que el subgrupo en cuanto a detalles, de preferencia usar el primero, brinda mas data
tickets %>% ggplot(aes(x=reorder(Title,Title,function(x)length(x))))+geom_bar(fill=mes)+coord_flip()
# el title es mas completo que el subgrupo en cuanto a detalles, de preferencia usar el primero, brinda mas data
tickets %>% ggplot(aes(x=reorder(Title,Title,function(x)length(x))))+geom_bar(fill=mes)+coord_flip()
# el title es mas completo que el subgrupo en cuanto a detalles, de preferencia usar el primero, brinda mas data
tickets %>% ggplot(aes(x=reorder(Title,Title,function(x)length(x))))+geom_bar(fill=tickets$mes)+coord_flip()
# el title es mas completo que el subgrupo en cuanto a detalles, de preferencia usar el primero, brinda mas data
tickets %>% ggplot(aes(x=reorder(Title,Title,function(x)length(x))),fill=mes)+geom_bar()+coord_flip()
# el title es mas completo que el subgrupo en cuanto a detalles, de preferencia usar el primero, brinda mas data
tickets %>% ggplot(aes(x=reorder(Title,Title,function(x)length(x)),fill=mes))+geom_bar()+coord_flip()
# el title es mas completo que el subgrupo en cuanto a detalles, de preferencia usar el primero, brinda mas data
tickets %>% ggplot(aes(x=reorder(Title,Title,function(x)length(x))))+geom_bar()+coord_flip()+facet_grid(~mes)
# el title es mas completo que el subgrupo en cuanto a detalles, de preferencia usar el primero, brinda mas data
tickets %>% ggplot(aes(x=reorder(Title,Title,function(x)length(x))))+geom_bar()+coord_flip()+facet_wrap(~mes)
# el title es mas completo que el subgrupo en cuanto a detalles, de preferencia usar el primero, brinda mas data
tickets %>% ggplot(aes(x=reorder(Title,Title,function(x)length(x))))+geom_bar()+coord_flip()+facet_grid(~mes)
# el title es mas completo que el subgrupo en cuanto a detalles, de preferencia usar el primero, brinda mas data
tickets %>% filter(mes!="") %>%  ggplot(aes(x=reorder(Title,Title,function(x)length(x))))+geom_bar()+coord_flip()+facet_grid(~mes)
# el title es mas completo que el subgrupo en cuanto a detalles, de preferencia usar el primero, brinda mas data
tickets %>% filter(mes!="") %>%  ggplot(aes(x=reorder(Title,Title,function(x)length(x))))+geom_bar()+coord_flip()+facet_grid(~mes)+labs(x="")
# el title es mas completo que el subgrupo en cuanto a detalles, de preferencia usar el primero, brinda mas data
tickets %>% filter(mes!="") %>%  ggplot(aes(x=reorder(Title,Title,function(x)length(x))))+geom_bar()+coord_flip()+facet_grid(~mes)+labs(x="",y="conteo")
# creando tablas resumen
tickets %>% count(Title)
# creando tablas resumen
tickets %>% count(-Title)
# creando tablas resumen
tickets %>% count(Title) %>% order_by(n)
# creando tablas resumen
tickets %>% count(Title) %>% arrange(n)
# creando tablas resumen
tickets %>% count(Title) %>% arrange(-n)
# creando tablas resumen
tickets %>% count(mes,Title) %>% arrange(-n)
# creando tablas resumen
tickets %>% count(Title,mes) %>% arrange(-n)
# creando tablas resumen
tickets %>% count(mes,Title)
View(tickets)
# creando tablas resumen
tickets %>% count(mes,Title)
# creando tablas resumen
tickets %>% count(mes,Title) %>% pivot_wider(names_from = mes)
# creando tablas resumen
tickets %>% count(mes,Title) %>% pivot_wider(names_from = mes,values_from = n)
# creando tablas resumen
tickets %>% count(mes,Title) %>% pivot_wider(names_from = mes,values_from = n) %>% arrange(`3`)
# creando tablas resumen
tickets %>% count(mes,Title) %>% pivot_wider(names_from = mes,values_from = n) %>% arrange(-`3`)
# creando tablas resumen
tickets_mes<-tickets %>% count(mes,Title) %>% pivot_wider(names_from = mes,values_from = n) %>% arrange(-`3`)
kbl(tickets_mes)
tickets %>% mutate(ifelse(mes=="1","Enero",ifelse(mes=="2","Febrero")))
tickets %>% mutate(ifelse(mes=="1","Enero",ifelse(mes=="2","Febrero","")))
tickets %>% mutate(ifelse(mes=="1","Enero",ifelse(mes=="2","Febrero",ifelse(mes=="3","Marzo",
ifelse(mes=="4","Abril","")))))
tickets<-tickets %>% mutate(ifelse(mes=="1","Enero",ifelse(mes=="2","Febrero",ifelse(mes=="3","Marzo",
ifelse(mes=="4","Abril","")))))
View(tickets)
tickets<-tickets %>% mutate(mes=ifelse(mes=="1","Enero",ifelse(mes=="2","Febrero",ifelse(mes=="3","Marzo",
ifelse(mes=="4","Abril","")))))
View(tickets)
tickets %>% count(mes,Title) %>% pivot_wider(names_from = mes,values_from = n) %>% arrange(-`3`)
tickets %>% count(mes,Title) %>% pivot_wider(names_from = mes,values_from = n)
# creando tablas resumen
tickets_mes<-tickets %>% count(mes,Title) %>% pivot_wider(names_from = mes,values_from = n) %>% arrange(-Marzo)
parse_factor(unique(tickets$mes))
parse_factor(unique(tickets$mes),levels = c("Enero","Febrero","Marzo","Abril"))
tickets$mes<-parse_factor(unique(tickets$mes),levels = c("Enero","Febrero","Marzo","Abril"))
tickets$mes<-parse_factor(tickets$mes,levels = c("Enero","Febrero","Marzo","Abril"))
str(tickets)
# el title es mas completo que el subgrupo en cuanto a detalles, de preferencia usar el primero, brinda mas data
tickets %>%  ggplot(aes(x=reorder(Title,Title,function(x)length(x))))+geom_bar()+coord_flip()+facet_grid(~mes)+labs(x="",y="conteo")
View(tickets_mes)
>>>>>>> Stashed changes
tickets$`Created at`<-parse_datetime(tickets$`Created at`)
tickets<-tickets %>% mutate(mes=month(`Created at`))
View(tickets)
ticket_comercial<-tickets %>% filter(Title %in% c("0001- Devolución de saldos por mayor valor pagado",
"0002 - Devolución de saldo de seguro",
"0003 - Inconsistencia con el pago de florines"  ,
"0004 - Certificación de consejero"   ,
"0006 - Certificación declaración de renta" ,
"0007- Estado de cuenta" ,
"0007-Estado de cuenta"  ,
"0008 - Solicitud de Paz y Salvo" ,
"0009 - Derecho de petición" ,
"0013 - Reintegro Consejero/Nombramiento Líder" ,
"0014 - Retiro Consejero/Líder"     ,
"0015 - Quitar y adicionar crédito de un corte",
"0016 - Revertir crédito",
"0017 - Mi Aflore - Consejero",
"0018 - Mi Aflore - Cliente",
"0019 - Llenada por Consejero",
"0020 - Llenada por Cliente",
"0022 - Falla en el proceso de desembolso Digital",
"0025 - Cancelación póliza",
"0027 - Problemas PBX",
"0054 - Problemas o cambios expansión geográfica",
"0057  - Problemas ARK o base de datos" ,
"0057 - Problemas ARK o base de datos",
"0059 - Corregir Abono negativo a capital",
"0060 - Pago duplicado"  ))
ticket_comercial %>% group_by(Title,mes)
ticket_comercial %>% group_by(Title,mes)
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed=median((`Updated at`- `Created at`)/3600))
tickets<-read_xls("tickets_abril.xls",skip = 2)
tickets<-tickets %>% mutate(mes=month(`Created at`))
ticket_comercial<-tickets %>% filter(Title %in% c("0001- Devolución de saldos por mayor valor pagado",
"0002 - Devolución de saldo de seguro",
"0003 - Inconsistencia con el pago de florines"  ,
"0004 - Certificación de consejero"   ,
"0006 - Certificación declaración de renta" ,
"0007- Estado de cuenta" ,
"0007-Estado de cuenta"  ,
"0008 - Solicitud de Paz y Salvo" ,
"0009 - Derecho de petición" ,
"0013 - Reintegro Consejero/Nombramiento Líder" ,
"0014 - Retiro Consejero/Líder"     ,
"0015 - Quitar y adicionar crédito de un corte",
"0016 - Revertir crédito",
"0017 - Mi Aflore - Consejero",
"0018 - Mi Aflore - Cliente",
"0019 - Llenada por Consejero",
"0020 - Llenada por Cliente",
"0022 - Falla en el proceso de desembolso Digital",
"0025 - Cancelación póliza",
"0027 - Problemas PBX",
"0054 - Problemas o cambios expansión geográfica",
"0057  - Problemas ARK o base de datos" ,
"0057 - Problemas ARK o base de datos",
"0059 - Corregir Abono negativo a capital",
"0060 - Pago duplicado"  ))
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed=median((`Updated at`- `Created at`)/3600))
View(ticket_comercial)
ticket_comercial %>% group_by(Title) %>% summarise(dif_updated_closed=median((`Updated at`- `Created at`)/3600))
View(ticket_comercial)
View(ticket_comercial)
ticket_comercial %>% group_by(Title)
ticket_comercial %>% count(Title)
ticket_comercial %>% count(Title) %>% arrange(n)
ticket_comercial<-tickets %>% filter(Title %in% c("0002 - Devolución de saldo de seguro",
"0003 - Inconsistencia con el pago de florines"  ,
"0004 - Certificación de consejero"   ,
"0006 - Certificación declaración de renta" ,
"0007- Estado de cuenta" ,
"0007-Estado de cuenta"  ,
"0008 - Solicitud de Paz y Salvo" ,
"0009 - Derecho de petición" ,
"0013 - Reintegro Consejero/Nombramiento Líder" ,
"0014 - Retiro Consejero/Líder"     ,
"0015 - Quitar y adicionar crédito de un corte",
"0016 - Revertir crédito",
"0017 - Mi Aflore - Consejero",
"0018 - Mi Aflore - Cliente",
"0019 - Llenada por Consejero",
"0020 - Llenada por Cliente",
"0022 - Falla en el proceso de desembolso Digital",
"0025 - Cancelación póliza",
"0027 - Problemas PBX",
"0054 - Problemas o cambios expansión geográfica",
"0057  - Problemas ARK o base de datos" ,
"0057 - Problemas ARK o base de datos",
"0059 - Corregir Abono negativo a capital",
"0060 - Pago duplicado"  ))
ticket_comercial %>% group_by(Title) %>% summarise(dif_updated_closed=median((`Updated at`- `Created at`)/3600))
View(ticket_comercial)
tickets<-read_xls("tickets2.xls",skip = 2)
tickets<-tickets %>% mutate(mes=month(`Created at`))
ticket_comercial<-tickets %>% filter(Title %in% c("0002 - Devolución de saldo de seguro",
"0003 - Inconsistencia con el pago de florines"  ,
"0004 - Certificación de consejero"   ,
"0006 - Certificación declaración de renta" ,
"0007- Estado de cuenta" ,
"0007-Estado de cuenta"  ,
"0008 - Solicitud de Paz y Salvo" ,
"0009 - Derecho de petición" ,
"0013 - Reintegro Consejero/Nombramiento Líder" ,
"0014 - Retiro Consejero/Líder"     ,
"0015 - Quitar y adicionar crédito de un corte",
"0016 - Revertir crédito",
"0017 - Mi Aflore - Consejero",
"0018 - Mi Aflore - Cliente",
"0019 - Llenada por Consejero",
"0020 - Llenada por Cliente",
"0022 - Falla en el proceso de desembolso Digital",
"0025 - Cancelación póliza",
"0027 - Problemas PBX",
"0054 - Problemas o cambios expansión geográfica",
"0057  - Problemas ARK o base de datos" ,
"0057 - Problemas ARK o base de datos",
"0059 - Corregir Abono negativo a capital",
"0060 - Pago duplicado"  ))
ticket_comercial<-tickets %>% filter(Title %in% c("0001- Devolución de saldos por mayor valor pagado",
"0002 - Devolución de saldo de seguro",
"0003 - Inconsistencia con el pago de florines"  ,
"0004 - Certificación de consejero"   ,
"0006 - Certificación declaración de renta" ,
"0007- Estado de cuenta" ,
"0007-Estado de cuenta"  ,
"0008 - Solicitud de Paz y Salvo" ,
"0009 - Derecho de petición" ,
"0013 - Reintegro Consejero/Nombramiento Líder" ,
"0014 - Retiro Consejero/Líder"     ,
"0015 - Quitar y adicionar crédito de un corte",
"0016 - Revertir crédito",
"0017 - Mi Aflore - Consejero",
"0018 - Mi Aflore - Cliente",
"0019 - Llenada por Consejero",
"0020 - Llenada por Cliente",
"0022 - Falla en el proceso de desembolso Digital",
"0025 - Cancelación póliza",
"0027 - Problemas PBX",
"0054 - Problemas o cambios expansión geográfica",
"0057  - Problemas ARK o base de datos" ,
"0057 - Problemas ARK o base de datos",
"0059 - Corregir Abono negativo a capital",
"0060 - Pago duplicado"  ))
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed=median((`Updated at`- `Created at`)/3600))
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed=median((`Updated at`- `Created at`)/3600)) %>% arrange(-dif_updated_closed)
# como las fechas estan como carácteres y no date lo convertimos
tickets$`Created at`<-parse_datetime(tickets$`Created at`)
tickets$`Updated at`<-parse_datetime(tickets$`Updated at`)
tickets$`Closed at`<-parse_datetime(tickets$`Closed at`)
tickets<-tickets %>% mutate(mes=month(`Created at`))
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed=median((`Updated at`- `Created at`)/3600)) %>% arrange(-dif_updated_closed) %>% ggplot(aes(x=reorder(Title,dif_updated_closed),y=dif_updated_closed,fill=factor(mes,levels=c("4","3","2","1"))))+geom_bar(stat = "identity",position = "dodge2")+coord_flip()+guides(fill=guide_legend(title="mes"))+labs(x="",y="horas promedio",title = "Horas promedio de resolución por tipo de ticket")
tickets<-read_xls("tickets2.xls",skip = 2)
# como las fechas estan como carácteres y no date lo convertimos
tickets$`Created at`<-parse_datetime(tickets$`Created at`)
tickets$`Updated at`<-parse_datetime(tickets$`Updated at`)
tickets$`Closed at`<-parse_datetime(tickets$`Closed at`)
tickets<-tickets %>% mutate(mes=month(`Created at`))
tickets<-tickets %>% filter(mes!="")
ticket_comercial<-tickets %>% filter(Title %in% c("0001- Devolución de saldos por mayor valor pagado",
"0002 - Devolución de saldo de seguro",
"0003 - Inconsistencia con el pago de florines"  ,
"0004 - Certificación de consejero"   ,
"0006 - Certificación declaración de renta" ,
"0007- Estado de cuenta" ,
"0007-Estado de cuenta"  ,
"0008 - Solicitud de Paz y Salvo" ,
"0009 - Derecho de petición" ,
"0013 - Reintegro Consejero/Nombramiento Líder" ,
"0014 - Retiro Consejero/Líder"     ,
"0015 - Quitar y adicionar crédito de un corte",
"0016 - Revertir crédito",
"0017 - Mi Aflore - Consejero",
"0018 - Mi Aflore - Cliente",
"0019 - Llenada por Consejero",
"0020 - Llenada por Cliente",
"0022 - Falla en el proceso de desembolso Digital",
"0025 - Cancelación póliza",
"0027 - Problemas PBX",
"0054 - Problemas o cambios expansión geográfica",
"0057  - Problemas ARK o base de datos" ,
"0057 - Problemas ARK o base de datos",
"0059 - Corregir Abono negativo a capital",
"0060 - Pago duplicado"  ))
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed=median((`Updated at`- `Created at`)/3600)) %>% arrange(-dif_updated_closed) %>% ggplot(aes(x=reorder(Title,dif_updated_closed),y=dif_updated_closed,fill=factor(mes,levels=c("4","3","2","1"))))+geom_bar(stat = "identity",position = "dodge2")+coord_flip()+guides(fill=guide_legend(title="mes"))+labs(x="",y="horas promedio",title = "Horas promedio de resolución por tipo de ticket")
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed=median((`Updated at`- `Created at`)/3600))
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed=median((`Updated at`- `Created at`)/3600)) %>% arrange(-dif_updated_closed) %>% ggplot(aes(x=reorder(Title,dif_updated_closed),y=dif_updated_closed,fill=factor(mes,levels=c("4","3","2","1")),label=dif_updated_closed))+geom_bar(stat = "identity",position = "dodge2")+coord_flip()+guides(fill=guide_legend(title="mes"))+labs(x="",y="horas promedio",title = "Horas promedio de resolución por tipo de ticket")+geom_text()
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed=round(median((`Updated at`- `Created at`)/3600),digits = 1)) %>% arrange(-dif_updated_closed) %>% ggplot(aes(x=reorder(Title,dif_updated_closed),y=dif_updated_closed,fill=factor(mes,levels=c("4","3","2","1")),label=dif_updated_closed))+geom_bar(stat = "identity",position = "dodge2")+coord_flip()+guides(fill=guide_legend(title="mes"))+labs(x="",y="horas promedio",title = "Horas promedio de resolución por tipo de ticket")+geom_text()
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed=round(median((`Updated at`- `Created at`)/3600),digits = 1)) %>% arrange(-dif_updated_closed) %>% ggplot(aes(x=reorder(Title,dif_updated_closed),y=dif_updated_closed,fill=factor(mes,levels=c("4","3","2","1")),label=dif_updated_closed))+geom_bar(stat = "identity",position = "dodge2")+coord_flip()+guides(fill=guide_legend(title="mes"))+labs(x="",y="horas promedio",title = "Horas promedio de resolución por tipo de ticket")+geom_text(position = position_dodge(width = 0.9))
tickets<-read_xls("tickets2.xls",skip = 2)
# como las fechas estan como carácteres y no date lo convertimos
tickets$`Created at`<-parse_datetime(tickets$`Created at`)
tickets$`Updated at`<-parse_datetime(tickets$`Updated at`)
tickets$`Closed at`<-parse_datetime(tickets$`Closed at`)
tickets<-tickets %>% mutate(mes=month(`Created at`))
ticket_comercial<-tickets %>% filter(Title %in% c("0001- Devolución de saldos por mayor valor pagado",
"0002 - Devolución de saldo de seguro",
"0003 - Inconsistencia con el pago de florines"  ,
"0004 - Certificación de consejero"   ,
"0006 - Certificación declaración de renta" ,
"0007- Estado de cuenta" ,
"0007-Estado de cuenta"  ,
"0008 - Solicitud de Paz y Salvo" ,
"0009 - Derecho de petición" ,
"0013 - Reintegro Consejero/Nombramiento Líder" ,
"0014 - Retiro Consejero/Líder"     ,
"0015 - Quitar y adicionar crédito de un corte",
"0016 - Revertir crédito",
"0017 - Mi Aflore - Consejero",
"0018 - Mi Aflore - Cliente",
"0019 - Llenada por Consejero",
"0020 - Llenada por Cliente",
"0022 - Falla en el proceso de desembolso Digital",
"0025 - Cancelación póliza",
"0027 - Problemas PBX",
"0054 - Problemas o cambios expansión geográfica",
"0057  - Problemas ARK o base de datos" ,
"0057 - Problemas ARK o base de datos",
"0059 - Corregir Abono negativo a capital",
"0060 - Pago duplicado"  ))
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed=round(median((`Updated at`- `Created at`)/3600),digits = 1)) %>% arrange(-dif_updated_closed) %>% ggplot(aes(x=reorder(Title,dif_updated_closed),y=dif_updated_closed,fill=factor(mes,levels=c("4","3","2","1")),label=dif_updated_closed))+geom_bar(stat = "identity",position = "dodge2")+coord_flip()+guides(fill=guide_legend(title="mes"))+labs(x="",y="horas promedio",title = "Horas promedio de resolución por tipo de ticket")+geom_text(position = position_dodge(width = 0.9))
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed=round(median((`Updated at`- `Created at`)/3600),digits = 1)) %>% arrange(-dif_updated_closed) %>% ggplot(aes(x=reorder(Title,dif_updated_closed),y=dif_updated_closed,fill=factor(mes,levels=c("4","3","2","1")),label=dif_updated_closed))+geom_bar(stat = "identity",position = "dodge")+coord_flip()+guides(fill=guide_legend(title="mes"))+labs(x="",y="horas promedio",title = "Horas promedio de resolución por tipo de ticket")+geom_text(position = position_dodge(width = 0.9))
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed=median((`Updated at`- `Created at`)/3600)) %>% arrange(-dif_updated_closed) %>% ggplot(aes(x=reorder(Title,dif_updated_closed),y=dif_updated_closed,fill=factor(mes,levels=c("4","3","2","1")),label=dif_updated_closed))+geom_bar(stat = "identity",position = "dodge")+coord_flip()+guides(fill=guide_legend(title="mes"))+labs(x="",y="horas promedio",title = "Horas promedio de resolución por tipo de ticket")+geom_text(position = position_dodge(width = 0.9))
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed=median((`Updated at`- `Created at`)/3600)) %>% arrange(-dif_updated_closed) %>% ggplot(aes(x=reorder(Title,dif_updated_closed),y=dif_updated_closed,fill=factor(mes,levels=c("4","3","2","1")),label=round(dif_updated_closed,digit=2)))+geom_bar(stat = "identity",position = "dodge")+coord_flip()+guides(fill=guide_legend(title="mes"))+labs(x="",y="horas promedio",title = "Horas promedio de resolución por tipo de ticket")+geom_text(position = position_dodge(width = 0.9))
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed=median((`Updated at`- `Created at`)/3600)) %>% arrange(-dif_updated_closed) %>% ggplot(aes(x=reorder(Title,dif_updated_closed),y=dif_updated_closed,fill=factor(mes,levels=c("4","3","2","1")),label=round(dif_updated_closed,digit=1)))+geom_bar(stat = "identity",position = "dodge")+coord_flip()+guides(fill=guide_legend(title="mes"))+labs(x="",y="horas promedio",title = "Horas promedio de resolución por tipo de ticket")+geom_text(position = position_dodge(width = 0.9))
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed=median((`Updated at`- `Created at`)/3600)) %>% arrange(-dif_updated_closed) %>% kbl()
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed=round( median((`Updated at`- `Created at`)/3600))) %>% arrange(-dif_updated_closed) %>% kbl()
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed= median((`Updated at`- `Created at`)/3600)) %>% arrange(-dif_updated_closed) %>% kbl() %>% kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed= median((`Updated at`- `Created at`)/3600)) %>% arrange(Title-dif_updated_closed) %>% kbl() %>% kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed= median((`Updated at`- `Created at`)/3600)) %>% arrange(Title,dif_updated_closed) %>% kbl() %>% kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed= median((`Updated at`- `Created at`)/36)) %>% arrange(Title,dif_updated_closed) %>% kbl() %>% kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed= median((`Updated at`- `Created at`)/3600)) %>% arrange(Title,dif_updated_closed) %>% kbl() %>% kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed= median((`Updated at`- `Created at`)/36)) %>% arrange(Title,dif_updated_closed) %>% kbl() %>% kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed= median((`Updated at`- `Created at`)/3600)) %>% arrange(Title,dif_updated_closed) %>% kbl() %>% kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed= median((`Updated at`- `Created at`)/3600)) %>% arrange(Title,-dif_updated_closed) %>% kbl() %>% kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
# Horas promedio por pqr por mes (gráfico)
ticket_comercial %>% count(mes,Title) %>% ggplot(aes(x=reorder(Title,n),y=n,fill=factor(mes,levels=c("4","3","2","1"))))+geom_bar(stat = "identity",position = "dodge2")+coord_flip()+labs(x="",y="conteo")+guides(fill=guide_legend(title="mes")
ticket_comercial %>% count(mes,Title) %>% ggplot(aes(x=reorder(Title,n),y=n,fill=factor(mes,levels=c("4","3","2","1"))))+geom_bar(stat = "identity",position = "dodge2")+coord_flip()+labs(x="",y="conteo")+guides(fill=guide_legend(title="mes"))
ticket_comercial %>% count(mes,Title) %>% ggplot(aes(x=reorder(Title,n),y=n,fill=factor(mes,levels=c("4","3","2","1"))))+geom_bar(stat = "identity",position = "dodge2")+coord_flip()+labs(x="",y="conteo")+guides(fill=guide_legend(title="mes"))
ticket_comercial %>% count(mes,Title)
ticket_comercial %>% count(mes,Title)
ticket_comercial %>% count(mes,Title) %>% ggplot(aes(x=reorder(Title,n),y=n,fill=factor(mes,levels=c("4","3","2","1")),label=n))+geom_bar(stat = "identity",position = "dodge2")+coord_flip()+labs(x="",y="conteo")+guides(fill=guide_legend(title="mes"))+geom_text()
ticket_comercial %>% count(mes,Title) %>% ggplot(aes(x=reorder(Title,n),y=n,fill=factor(mes,levels=c("4","3","2","1")),label=n))+geom_bar(stat = "identity",position = "dodge2")+coord_flip()+labs(x="",y="conteo")+guides(fill=guide_legend(title="mes"))+geom_text(position = position_dodge(width = 0.9))
ticket_comercial %>% count(mes,Title) %>%  %>% arrange(Title,-n) %>% kbl() %>% kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
ticket_comercial %>% count(mes,Title) %>% arrange(Title,-n) %>% kbl() %>% kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
ticket_comercial %>% group_by(Title,mes) %>% summarise(dif_updated_closed= median((`Updated at`- `Created at`)/3600)) %>% arrange(Title,-dif_updated_closed) %>% kbl() %>% kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
ticket_comercial %>% group_by(mes,Title) %>% summarise(dif_updated_closed= median((`Updated at`- `Created at`)/3600)) %>% arrange(Title,-dif_updated_closed) %>% kbl() %>% kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
ticket_comercial %>% group_by(mes,Title) %>% summarise(dif_updated_closed= median((`Updated at`- `Created at`)/3600)) %>% arrange(mes,Title,-dif_updated_closed) %>% kbl() %>% kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
ticket_comercial %>% group_by(mes,Title) %>% summarise(dif_updated_closed= median((`Updated at`- `Created at`)/3600)) %>% arrange(Title,-dif_updated_closed) %>% kbl() %>% kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
ticket_comercial %>% group_by(mes,Title) %>% summarise(dif_updated_closed= median((`Updated at`- `Created at`)/3600)) %>% arrange(Title,mes) %>% kbl() %>% kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
ticket_comercial %>% count(mes,Title) %>% arrange(Title,-n) %>% kbl() %>% kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
ticket_comercial %>% count(mes,Title) %>% arrange(Title,mes) %>% kbl() %>% kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
ticket_comercial %>% count(mes,Title) %>% arrange(Title,mes) %>% kbl() %>% kable_styling(bootstrap_options = c("striped", "hover", "condensed"))
knitr::opts_chunk$set(
message = FALSE,
warning = FALSE,
include = FALSE
)
library(readxl)
<<<<<<< HEAD
library(readxl)
library(lubridate)
library(tidyr)
library(dplyr)
library(ggplot2)
comfama_febrero<-read_xlsx("comfama_febrero.xlsx")
comfama_febrero<-read_xlsx("comfama_febrero.xlsx")
View(comfama_febrero)
View(comfama_febrero)
View(comfama_febrero)
library(kableExtra)
library(kableExtra)
library(kableExtra)
str(comfama_febrero)
comfama_febrero %>% filter(Parentesco=="Titular")
unique(comfama_febrero$Parentesco)
length( comfama_febrero %>% filter(Parentesco=="Titular"))
nrow( comfama_febrero %>% filter(Parentesco=="Titular"))
comfama_febrero %>% filter(Parentesco=="Titular")
comfama_febrero %>% filter(Parentesco=="Titular") %>% count()
comfama_febrero %>% filter(Parentesco!="Titular") %>% count()
comfama_febrero %>% filter(¿`¿Desea aplicar a la beca?`="SI")
unique(comfama_febrero$`¿Desea aplicar a la beca?`)
comfama_febrero %>% filter(`¿Desea aplicar a la beca?`="SI") %>% count()
comfama_febrero %>% filter(`¿Desea aplicar a la beca?`=="SI") %>% count()
comfama_febrero %>% filter(`¿Desea aplicar a la beca?`=="SI") %>%
filter(Parentesco=="Titular") %>% count()
unique(comfama_febrero$Parentesco)
comfama_febrero %>% filter(`¿Desea aplicar a la beca?`=="SI") %>% count(Parentesco)
comfama_febrero %>% filter(`¿Desea aplicar a la beca?`=="SI") %>% count(Parentesco) %>%
arrange(-n)
comfama_febrero %>% filter(`¿Desea aplicar a la beca?`=="SI") %>% count(Parentesco) %>%
arrange(-n)
comfama_febrero %>% filter(`¿Desea aplicar a la beca?`=="SI") %>% count(Parentesco) %>%
arrange(-n) %>% kbl() %>% kable_styling(bootstrap_options = c(stripped))
comfama_febrero %>% filter(`¿Desea aplicar a la beca?`=="SI") %>% count(Parentesco) %>%
arrange(-n) %>% kbl() %>% kable_styling(bootstrap_options = c(striped))
comfama_febrero %>% filter(`¿Desea aplicar a la beca?`=="SI") %>% count(Parentesco) %>%
arrange(-n) %>% kbl() %>% kable_styling(bootstrap_options = c("striped"))
comfama_febrero %>% filter(`¿Desea aplicar a la beca?`=="SI") %>% count(Parentesco) %>%
arrange(-n) %>% kbl() %>% kable_styling( bootstrap_options = c("striped"))
comfama_febrero %>% filter(`¿Desea aplicar a la beca?`=="SI") %>% count(Parentesco) %>%
arrange(-n)
comfama_febrero %>% filter(`¿Desea aplicar a la beca?`=="SI") %>%
filter(Parentesco=="Titular") %>% count(Parentesco) %>%
arrange(-n)
comfama_febrero %>% count()
comfama_febrero %>% count(Pare)
comfama_febrero %>% count(Parentesco)
comfama_febrero %>% count(Parentesco) %>% arrange(-n)
comfama_febrero %>% count(Parentesco) %>% arrange(-n) %>% kbl() %>% kabl
=======
read_xlsx("application_bi.xlsx")
read_xlsx("applications_bi.xlsx")
applications_bi<-read_xlsx("applications_bi.xlsx")
gestioncomercial<-read_xlsx("gestion_comercial.xlsx")
str(applications_bi)
gestioncomercial %>% select(id)
applications_bi %>% select(ID,`Client ID`,`Created At`,Status,
`Client Document Number`,`Client Type Request`,
`Advisor ID`,`Client Type Request New`,`Aflore Product ID`)
applications_bi<-applications_bi %>% select(ID,`Client ID`,`Created At`,Status,
`Client Document Number`,`Client Type Request`,
`Advisor ID`,`Client Type Request New`,`Aflore Product ID`)
gestioncomercial %>% select(`Nombre Asesor`,`Numero De Documento`,Timestamp,`Nombre Asesor`,`Tipo De Persona`)
gestioncomercial<-gestioncomercial %>% select(`Nombre Asesor`,`Numero De Documento`,Timestamp,`Nombre Asesor`,`Tipo De Persona`)
View(applications_bi)
View(gestioncomercial)
gestioncomercial<-read_xlsx("gestion_comercial.xlsx")
gestioncomercial<-gestioncomercial %>% select(`Nombre Asesor`,`Numero De Documento`,
Timestamp,`Nombre Asesor`,`Tipo De Persona`,`Medio De Contacto`)
View(gestioncomercial)
gestioncomercial %>% ggplot(aes(x=`Medio De Contacto`))+geom_bar()
gestioncomercial %>% ggplot(aes(x=`Medio De Contacto`))+geom_count()
gestioncomercial %>% ggplot(aes(x=`Medio De Contacto`))+geom_bar()
View(gestioncomercial)
gestioncomercial %>% ggplot(aes(x=`Medio De Contacto`,fill=`Tipo De Persona`))+geom_bar()
gestioncomercial %>% ggplot(aes(x=`Medio De Contacto`,fill=`Tipo De Persona`))+geom_bar(position = "dodge")
gestioncomercial %>% ggplot(aes(x=`Medio De Contacto`,fill=`Tipo De Persona`))+geom_bar(position = "dodge2")
gestioncomercial %>% ggplot(aes(x=`Medio De Contacto`,fill=`Tipo De Persona`))+geom_bar(position = "dodge3")
applications_bi %>% left_join(gestioncomercial)
str(applications_bi)
str(gestioncomercial)
applications_bi %>% left_join(gestioncomercial,by = c("Numero De Documento"="Client Document Number"))
applications_bi %>% left_join(gestioncomercial,by = c("Client Document Number"="Numero De Documento"))
applications_bi %>% inner_join(gestioncomercial,by = c("Client Document Number"="Numero De Documento"))
newdata<-applications_bi %>% inner_join(gestioncomercial,by = c("Client Document Number"="Numero De Documento"))
View(newdata)
str(gestioncomercial)
range(gestioncomercial$Timestamp)
unique(gestioncomercial$`Nombre Asesor`)
unique(gestioncomercial$`Tipo De Persona`)
# filtering again
newdata %>% filter(`Tipo De Persona`=="Cliente")
# filtering again
newdata %>% filter(`Tipo De Persona`=="Cliente")
# filtering again
newdata %>% ggplot(aes(x=`Tipo De Persona`))+geom_bar()
View(newdata)
View(newdata)
newdata %>% filter(`Tipo De Persona`=="Cliente")
unique(newdata$`Client Type Request`)
newdata %>% filter(`Tipo De Persona`=="Cliente" & `Client Type Request`=="Nuevo")
newdata %>% filter(`Tipo De Persona`=="Cliente" & `Client Type Request`=="Nuevo" &
`Advisor ID` %in% c('23296','26508', '23313') & `Client Type Request New`=="Cliente directo")
View(newdata)
unique(newdata$`Aflore Product ID`)
newdata %>% filter(`Tipo De Persona`=="Cliente" & `Client Type Request`=="Nuevo" &
`Advisor ID` %in% c('23296','26508', '23313') & `Client Type Request New`=="Cliente directo" &
`Aflore Product ID`!="83")
newdata %>% filter(`Tipo De Persona`=="Cliente" & `Client Type Request`=="Nuevo" &
`Advisor ID` %in% c('23296','26508', '23313') & `Client Type Request New`=="Cliente directo")
# plots
gestioncomercial %>% ggplot(aes(x=`Medio De Contacto`,fill=`Tipo De Persona`))+geom_bar(position = "dodge2")
# filtering again
newdata %>% ggplot(aes(x=`Tipo De Persona`))+geom_bar()
# plots
gestioncomercial %>% ggplot(aes(x=`Medio De Contacto`,fill=`Tipo De Persona`))+geom_bar(position = "dodge2")
mensajes<-read_xlsx("onlymessages1.xlsx")
library(psych)
library(googlesheets4)
library(wordcloud)
library(tidytext)
library(writexl)
library(dplyr)
library(tidyr)
library(lubridate)
library(ggplot2)
mensajes<-read_xlsx("onlymessages1.xlsx")
library(readxl)
mensajes<-read_xlsx("onlymessages1.xlsx")
View(mensajes)
# lo ideal es buscar solo por un nombre porque si se busca por los dos nombres del CV los numeros se reducen bastante
coordinadores<-data.frame(x=c("Laura","Tatiana","Leidy","Luisa","Natalia","Eduardo"),y="")
coordinadores[1,2]<-length( grep("Laura",mensajes$Body))
View(coordinadores)
coordinadores[2,2]<-length( grep("Tatiana",mensajes$Body))
coordinadores[3,2]<-length( grep("Leidy",mensajes$Body))
coordinadores[4,2]<-length( grep("Luisa",mensajes$Body))
coordinadores[5,2]<-length( grep("Natalia",mensajes$Body))
coordinadores[6,2]<-length( grep("Eduardo",mensajes$Body))
View(coordinadores)
# lo ideal es buscar solo por un nombre porque si se busca por los dos nombres del CV los numeros se reducen bastante
coordinadores<-data.frame(x=c("Dulfay Linares","Esmeralda Correa","Jenny Rincón","Jhiovanni Vivas",
"Jose Luis Álvarez","Luz Dary Useche","María Paula Sarmiento",
"Nelson Rubio","Olga Alvarado","Sandra Herrera","Andrés Aguilar",
"Camilo Escobedo","Claudia Duque","Diego Cruz","Jessica Arias",
"Jorge Fernández","Paola Castro","Ruth Gonzalez"),y="")
View(coordinadores)
coordinadores[1,2]<-length( grep("Dulfay Linares, coordinadora virtual id 1001",mensajes$Body))
coordinadores[2,2]<-length( grep("Esmeralda Correa, coordinadora virtual id 1002",mensajes$Body))
coordinadores[3,2]<-length( grep("Jenny Rincón, coordinadora virtual id 1003",mensajes$Body))
coordinadores[4,2]<-length( grep("Jhiovanni Vivas, coordinador virtual id 1004",mensajes$Body))
coordinadores[5,2]<-length( grep("Jose Luis Álvarez, coordinador virtual id 1005",mensajes$Body))
coordinadores[6,2]<-length( grep("Luz Dary Useche, coordinadora virtual id 1006",mensajes$Body))
coordinadores[7,2]<-length( grep("María Paula Sarmiento, coordinadora virtual id 1007",mensajes$Body))
coordinadores[8,2]<-length( grep("Nelson Rubio, coordinador virtual id 1008",mensajes$Body))
coordinadores[9,2]<-length( grep("Olga Alvarado, coordinadora virtual id 1009",mensajes$Body))
coordinadores[10,2]<-length( grep("Sandra Herrera, coordinadora virtual id 1010",mensajes$Body))
coordinadores[11,2]<-length( grep("Andrés Aguilar, coordinador virtual id 2001",mensajes$Body))
coordinadores[12,2]<-length( grep("Camilo Escobedo, coordinador virtual id 2002",mensajes$Body))
coordinadores[13,2]<-length( grep("Claudia Duque, coordinadora virtual id 2003",mensajes$Body))
coordinadores[14,2]<-length( grep("Diego Cruz, coordinador virtual id 2004",mensajes$Body))
coordinadores[15,2]<-length( grep("Jessica Arias, coordinadora virtual id 2005",mensajes$Body))
coordinadores[16,2]<-length( grep("Jorge Fernández, coordinador virtual id 2006",mensajes$Body))
coordinadores[17,2]<-length( grep("Paola Castro, coordinadora virtual id 2007",mensajes$Body))
coordinadores[18,2]<-length( grep("Ruth Gonzalez, coordinadora virtual id 2008",mensajes$Body))
View(coordinadores)
View(mensajes)
View(mensajes)
View(coordinadores)
coordinadores[1,2]<-length( grep("Dulfay Linares, coordinadora virtual id 1001",mensajes$Body))
coordinadores[1,2]<-length( grep("Dulfay Linares, coordinadora virtual id 1001",mensajes$Body))
View(coordinadores)
# hay problema con jose luis y jose jhiovanni porque se repite el nombre jose
length( grep("Dulfay Linares, coordinadora virtual id 1001",mensajes$Body))
# hay problema con jose luis y jose jhiovanni porque se repite el nombre jose
length( grep("Dulfay Linares,coordinadora virtual id 1001",mensajes$Body))
# hay problema con jose luis y jose jhiovanni porque se repite el nombre jose
length( grep("Dulfay Linares",mensajes$Body))
# hay problema con jose luis y jose jhiovanni porque se repite el nombre jose
length( grep("Dulfay Linares, coordinadora ",mensajes$Body))
# hay problema con jose luis y jose jhiovanni porque se repite el nombre jose
length( grep("Dulfay Linares,",mensajes$Body))
# hay problema con jose luis y jose jhiovanni porque se repite el nombre jose
length( grep("id 1001",mensajes$Body))
grep("id 1001",mensajes$Body)
mensajes$Body[grep("id 1001",mensajes$Body)]
coordinadores[1,2]<-length( grep("id 1001",mensajes$Body))
coordinadores[2,2]<-length( grep("id 1002",mensajes$Body))
coordinadores[3,2]<-length( grep("id 1003",mensajes$Body))
coordinadores[4,2]<-length( grep("id 1004",mensajes$Body))
coordinadores[5,2]<-length( grep("id 1005",mensajes$Body))
coordinadores[6,2]<-length( grep("id 1006",mensajes$Body))
coordinadores[7,2]<-length( grep("id 1007",mensajes$Body))
coordinadores[8,2]<-length( grep("id 1008",mensajes$Body))
coordinadores[9,2]<-length( grep("id 1009",mensajes$Body))
coordinadores[10,2]<-length( grep("id 1010",mensajes$Body))
coordinadores[11,2]<-length( grep("id 2001",mensajes$Body))
coordinadores[12,2]<-length( grep("id 2002",mensajes$Body))
coordinadores[13,2]<-length( grep("id 2003",mensajes$Body))
coordinadores[14,2]<-length( grep("id 2004",mensajes$Body))
coordinadores[15,2]<-length( grep("id 2005",mensajes$Body))
coordinadores[16,2]<-length( grep("id 2006",mensajes$Body))
coordinadores[17,2]<-length( grep("id 2007",mensajes$Body))
coordinadores[18,2]<-length( grep("id 2008",mensajes$Body))
View(coordinadores)
grep("id 1001",mensajes$Body)
coordinadores %>% mutate(y=y/2)
coordinadores %>% mutate(pi=y/2)
mensajes$Body(grep("id 1001",mensajes$Body))
mensajes$Body(grep("id 1001",mensajes$Body))
str(coordinadores)
as.numeric(coordinadores$y)
View(coordinadores)
as.numeric(coordinadores$y)
coordinadores$y<-as.numeric(coordinadores$y)
coordinadores %>% mutate(gestiones=y/2)
coordinadores<-coordinadores %>% mutate(gestiones=y/2)
coordinadores
coordinadores %>% ggplot(aes(x=x,y=y))+geom_bar()
coordinadores %>% ggplot(aes(x=x,y=y))+geom_bar(stat = "identity")
coordinadores %>% ggplot(aes(x=x,y=y,label=y))+geom_bar(stat = "identity")+geom_text()
coordinadores %>% ggplot(aes(x=x,y=y,label=y))+geom_bar(stat = "identity")+geom_text()+coord_flip()
coordinadores %>% ggplot(aes(x=reorder(x,y),y=y,label=y))+geom_bar(stat = "identity")+geom_text()+coord_flip()
View(coordinadores)
coordinadores1<-data.frame(x=c("Dulfay Linares","Esmeralda Correa","Jenny Rincón","Jhiovanni Vivas",
"Jose Luis Álvarez","Luz Dary Useche","María Paula Sarmiento",
"Nelson Rubio","Olga Alvarado","Sandra Herrera","Andrés Aguilar",
"Camilo Escobedo","Claudia Duque","Diego Cruz","Jessica Arias",
"Jorge Fernández","Paola Castro","Ruth Gonzalez"),y="")
coordinadores1[1,2]<-length( grep("Dulfay Linares, coordinadora virtual id 1001",mensajes$Body))
coordinadores1[2,2]<-length( grep("Esmeralda Correa, coordinadora virtual id 1002",mensajes$Body))
coordinadores1[3,2]<-length( grep("Jenny Rincón, coordinadora virtual id 1003",mensajes$Body))
coordinadores1[4,2]<-length( grep("Jhiovanni Vivas, coordinador virtual id 1004",mensajes$Body))
coordinadores1[5,2]<-length( grep("Jose Luis Álvarez, coordinador virtual id 1005",mensajes$Body))
coordinadores1[6,2]<-length( grep("Luz Dary Useche, coordinadora virtual id 1006",mensajes$Body))
coordinadores1[7,2]<-length( grep("María Paula Sarmiento, coordinadora virtual id 1007",mensajes$Body))
coordinadores1[8,2]<-length( grep("Nelson Rubio, coordinador virtual id 1008",mensajes$Body))
coordinadores1[9,2]<-length( grep("Olga Alvarado, coordinadora virtual id 1009",mensajes$Body))
coordinadores1[10,2]<-length( grep("Sandra Herrera, coordinadora virtual id 1010",mensajes$Body))
coordinadores1[11,2]<-length( grep("Andrés Aguilar, coordinador virtual id 2001",mensajes$Body))
coordinadores1[12,2]<-length( grep("Camilo Escobedo, coordinador virtual id 2002",mensajes$Body))
coordinadores1[13,2]<-length( grep("Claudia Duque, coordinadora virtual id 2003",mensajes$Body))
coordinadores1[14,2]<-length( grep("Diego Cruz, coordinador virtual id 2004",mensajes$Body))
coordinadores1[15,2]<-length( grep("Jessica Arias, coordinadora virtual id 2005",mensajes$Body))
coordinadores1[16,2]<-length( grep("Jorge Fernández, coordinador virtual id 2006",mensajes$Body))
coordinadores1[17,2]<-length( grep("Paola Castro, coordinadora virtual id 2007",mensajes$Body))
coordinadores1[18,2]<-length( grep("Ruth Gonzalez, coordinadora virtual id 2008",mensajes$Body))
coordinadores1 %>% ggplot(aes(x=reorder(x,y),y=y,label=y))+geom_bar(stat = "identity")+geom_text()+coord_flip()
View(coordinadores1)
str(coordinadores1)
grep("id 1008",mensajes$Body
grep("id 1008",mensajes$Body)
grep("id 1008",mensajes$Body)
coordinadores %>% ggplot(aes(x=reorder(x,y),y=y,label=y))+geom_bar(stat = "identity")+geom_text()+coord_flip()
coordinadores %>% ggplot(aes(x=reorder(x,y),y=y,label=y))+geom_bar(stat = "identity",fill="lightblue")+geom_text()+coord_flip()+
labs(x="",y="veces de id",title = "Numero de veces que aparece el id único por CV")
coordinadores %>% ggplot(aes(x=reorder(x,y),y=y,label=y))+geom_bar(stat = "identity",fill="lightblue")+geom_text()+coord_flip()+
labs(x="",y="veces de id",title = "Numero de veces que aparece el id único por CV",
caption = "Si el id se menciona en el saludo y al despedirse, las gestiones deberian ser la mitad")
coordinadores %>% ggplot(aes(x=reorder(x,y),y=y,label=y))+geom_bar(stat = "identity",fill="lightblue")+geom_text()+coord_flip()+
labs(x="",y="veces de id unico por cv",title = "Numero de veces que aparece el id único por CV",
caption = "Si el id se menciona en el saludo y al despedirse, las gestiones deberian ser la mitad")
<<<<<<< Updated upstream
>>>>>>> 0ec9206f775abc8ba3d986a811a00f3ece3df819
=======
library(psych)
library(googlesheets4)
library(wordcloud)
library(tidytext)
library(writexl)
library(dplyr)
library(tidyr)
library(lubridate)
library(ggplot2)
library(readxl)
mensajes<-read_xlsx("onlymessages1.xlsx")
# lo ideal es buscar solo por un nombre porque si se busca por los dos nombres del CV los numeros se reducen bastante
coordinadores<-data.frame(x=c("Dulfay Linares","Esmeralda Correa","Jenny Rincón","Jhiovanni Vivas",
"Jose Luis Álvarez","Luz Dary Useche","María Paula Sarmiento",
"Nelson Rubio","Olga Alvarado","Sandra Herrera","Andrés Aguilar",
"Camilo Escobedo","Claudia Duque","Diego Cruz","Jessica Arias",
"Jorge Fernández","Paola Castro","Ruth Gonzalez"),y="")
coordinadores[1,2]<-length( grep("id 1001",mensajes$Body))
coordinadores[2,2]<-length( grep("id 1002",mensajes$Body))
coordinadores[3,2]<-length( grep("id 1003",mensajes$Body))
coordinadores[4,2]<-length( grep("id 1004",mensajes$Body))
coordinadores[5,2]<-length( grep("id 1005",mensajes$Body))
coordinadores[6,2]<-length( grep("id 1006",mensajes$Body))
coordinadores[7,2]<-length( grep("id 1007",mensajes$Body))
coordinadores[8,2]<-length( grep("id 1008",mensajes$Body))
coordinadores[9,2]<-length( grep("id 1009",mensajes$Body))
coordinadores[10,2]<-length( grep("id 1010",mensajes$Body))
coordinadores[11,2]<-length( grep("id 2001",mensajes$Body))
coordinadores[12,2]<-length( grep("id 2002",mensajes$Body))
coordinadores[13,2]<-length( grep("id 2003",mensajes$Body))
coordinadores[14,2]<-length( grep("id 2004",mensajes$Body))
coordinadores[15,2]<-length( grep("id 2005",mensajes$Body))
coordinadores[16,2]<-length( grep("id 2006",mensajes$Body))
coordinadores[17,2]<-length( grep("id 2007",mensajes$Body))
coordinadores[18,2]<-length( grep("id 2008",mensajes$Body))
# lo ideal es buscar solo por un nombre porque si se busca por los dos nombres del CV los numeros se reducen bastante
coordinadores2<-data.frame(x=c("Dulfay Linares","Esmeralda Correa","Jenny Rincón","Jhiovanni Vivas",
"Jose Luis Álvarez","Luz Dary Useche","María Paula Sarmiento",
"Nelson Rubio","Olga Alvarado","Sandra Herrera","Andrés Aguilar",
"Camilo Escobedo","Claudia Duque","Diego Cruz","Jessica Arias",
"Jorge Fernández","Paola Castro","Ruth Gonzalez"),y="")
coordinadores2[1,2]<-length( grep("id1001",mensajes$Body))
coordinadores2[2,2]<-length( grep("id1002",mensajes$Body))
coordinadores2[3,2]<-length( grep("id1003",mensajes$Body))
coordinadores2[4,2]<-length( grep("id1004",mensajes$Body))
coordinadores2[5,2]<-length( grep("id1005",mensajes$Body))
coordinadores2[6,2]<-length( grep("id1006",mensajes$Body))
coordinadores2[7,2]<-length( grep("id1007",mensajes$Body))
coordinadores2[8,2]<-length( grep("id1008",mensajes$Body))
coordinadores2[9,2]<-length( grep("id1009",mensajes$Body))
coordinadores2[10,2]<-length( grep("id1010",mensajes$Body))
coordinadores2[11,2]<-length( grep("id2001",mensajes$Body))
coordinadores2[12,2]<-length( grep("id2002",mensajes$Body))
coordinadores2[13,2]<-length( grep("id2003",mensajes$Body))
coordinadores2[14,2]<-length( grep("id2004",mensajes$Body))
coordinadores2[15,2]<-length( grep("id2005",mensajes$Body))
coordinadores2[16,2]<-length( grep("id2006",mensajes$Body))
coordinadores2[17,2]<-length( grep("id2007",mensajes$Body))
coordinadores2[18,2]<-length( grep("id2008",mensajes$Body))
View(coordinadores)
View(mensajes)
View(coordinadores2)
coordinadores %>% ggplot(aes(x=reorder(x,y),y=y,label=y))+geom_bar(stat = "identity",fill="lightblue")+geom_text()+coord_flip()+
labs(x="",y="veces de id unico por cv",title = "Numero de veces que aparece el id único por CV",
caption = "Si el id se menciona en el saludo y al despedirse, las gestiones deberian ser la mitad")
#
coordinadores$y<-as.numeric(coordinadores$y)
coordinadores1$y<-as.numeric(coordinadores1$y)
coordinadores<-coordinadores %>% mutate(gestiones=y/2)
coordinadores %>% ggplot(aes(x=reorder(x,y),y=y,label=y))+geom_bar(stat = "identity",fill="lightblue")+geom_text()+coord_flip()+
labs(x="",y="veces de id unico por cv",title = "Numero de veces que aparece el id único por CV",
caption = "Si el id se menciona en el saludo y al despedirse, las gestiones deberian ser la mitad")
coordinadores2$y<-as.numeric(coordinadores1$y)
coordinadores2 %>% ggplot(aes(x=reorder(x,y),y=y,label=y))+geom_bar(stat = "identity",fill="lightblue")+geom_text()+coord_flip()+
labs(x="",y="veces de id unico por cv",title = "Numero de veces que aparece el id único por CV",
caption = "Si el id se menciona en el saludo y al despedirse, las gestiones deberian ser la mitad")
coordinadores2$y<-as.numeric(coordinadores2$y)
coordinadores2 %>% ggplot(aes(x=reorder(x,y),y=y,label=y))+geom_bar(stat = "identity",fill="lightblue")+geom_text()+coord_flip()+
labs(x="",y="veces de id unico por cv",title = "Numero de veces que aparece el id único por CV",
caption = "Si el id se menciona en el saludo y al despedirse, las gestiones deberian ser la mitad")
coordinadores %>% ggplot(aes(x=reorder(x,y),y=y,label=y))+geom_bar(stat = "identity",fill="lightblue")+geom_text()+coord_flip()+
labs(x="",y="veces de id unico por cv",title = "Numero de veces que aparece el id único por CV",
caption = "Si el id se menciona en el saludo y al despedirse, las gestiones deberian ser la mitad")
coordinadores2 %>% ggplot(aes(x=reorder(x,y),y=y,label=y))+geom_bar(stat = "identity",fill="lightblue")+geom_text()+coord_flip()+
labs(x="",y="veces de id unico por cv",title = "Numero de veces que aparece el id único por CV",
caption = "Si el id se menciona en el saludo y al despedirse, las gestiones deberian ser la mitad")
View(coordinadores2)
View(coordinadores2)
View(coordinadores)
# sumando id numero cv con espacio y sin espacio
coordinadores[,2]
coordinadores2[,2]
coordinadores[,2]+coordinadores2[,2]
# sumando id numero cv con espacio y sin espacio
coordinadoressuma<-coordinadores2
View(coordinadoressuma)
View(coordinadoressuma)
coordinadoressuma[,2]<- coordinadores[,2]+coordinadores2[,2]
View(coordinadoressuma)
coordinadoressuma %>% ggplot(aes(x=reorder(x,y),y=y,label=y))+geom_bar(stat = "identity",fill="lightblue")+geom_text()+coord_flip()+
labs(x="",y="veces de id unico por cv",title = "Numero de veces que aparece el id único por CV",
caption = "Si el id se menciona en el saludo y al despedirse, las gestiones deberian ser la mitad")
View(mensajes)
>>>>>>> Stashed changes
