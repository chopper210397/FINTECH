jose_luis_alvarez %>% filter(Timestamp>(today()-8)) ,
camilo_escobedo %>% filter(Timestamp>(today()-8)) ,
tatiana_real %>% filter(Timestamp>(today()-8)) ,
luisa_moreno %>% filter(Timestamp>(today()-8)) ,
leidy_rojas %>% filter(Timestamp>(today()-8)) ,
karen_fernandez %>% filter(Timestamp>(today()-8)) ,
catalina_suarez %>% filter(Timestamp>(today()-8))
)
selected_data<-last_7_days %>%
drop_na(`Si quieres que te contactemos para profundizar sobre tu calificación, ¡déjanos tu número de celular porfa! (Opcional) - Sin espacios, sin símbolos ni +57`) %>%
arrange(across(Timestamp,desc))
#ss <- gs4_create("wish_contact_last_7_days", sheets = selected_data)
sheet_write(selected_data,ss="https://docs.google.com/spreadsheets/d/1CNdsejB5HRBYDAj6pajzfpjE60_BBSf2uA_KRWAkJPc/edit?usp=sharing",sheet="selected_data")
rm(list=ls())
# reading C-SAT data from googlesheets
# install.packages("googlesheets4")
library(googlesheets4)
library(dplyr)
library(lubridate)
library(tidyr)
# tal parece que los nombres de los sheets no pueden contener tildes o falla la lectura mediante gs4
# name_of_sheets<-sheet_names("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing")
nelson_rubio<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Nelson Rubio",
col_types = "Dnccc")
luz_dary_useche<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Luz Dary Useche",
col_types = "Dnccc")
jose_luis_alvarez<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Jose Luis Alvarez",
col_types = "Dnccc")
camilo_escobedo<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Camilo Escobedo",
col_types = "Dnccc")
tatiana_real<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Tatiana Real",
col_types = "Dnccc")
luisa_moreno<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Luisa Moreno",
col_types = "Dnccc")
leidy_rojas<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Leidy Rojas",
col_types = "Dnccc")
karen_fernandez<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Karen Fernandez",
col_types = "Dnccc")
catalina_suarez<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Catalina Suarez",
col_types = "Dnccc")
# homogenizando los nombres de las columnas
colnames(luz_dary_useche)<-colnames(nelson_rubio)
colnames(jose_luis_alvarez)<-colnames(nelson_rubio)
colnames(camilo_escobedo)<-colnames(nelson_rubio)
colnames(tatiana_real)<-colnames(nelson_rubio)
colnames(luisa_moreno)<-colnames(nelson_rubio)
colnames(leidy_rojas)<-colnames(nelson_rubio)
colnames(karen_fernandez)<-colnames(nelson_rubio)
colnames(catalina_suarez)<-colnames(nelson_rubio)
# creando columna nombre
nelson_rubio<-nelson_rubio %>% mutate(nombre= 'Nelson Rubio')
luz_dary_useche<-luz_dary_useche %>% mutate(nombre='Luz Dary Useche')
jose_luis_alvarez<-jose_luis_alvarez %>% mutate(nombre='Jose Luis Alvarez')
camilo_escobedo<-camilo_escobedo %>% mutate(nombre='Camilo Escobedo')
tatiana_real<-tatiana_real %>% mutate(nombre='Tatiana Real')
luisa_moreno<-luisa_moreno %>% mutate(nombre='Luisa Moreno')
leidy_rojas<-leidy_rojas %>% mutate(nombre='Leidy Rojas')
karen_fernandez<-karen_fernandez %>% mutate(nombre='Karen Fernandez')
catalina_suarez<-catalina_suarez %>% mutate(nombre='Catalina Suarez')
# ultimos 7 dias
last_7_days<-bind_rows(
nelson_rubio %>% filter(Timestamp>(today()-8)) ,
luz_dary_useche %>% filter(Timestamp>(today()-8)) ,
jose_luis_alvarez %>% filter(Timestamp>(today()-8)) ,
camilo_escobedo %>% filter(Timestamp>(today()-8)) ,
tatiana_real %>% filter(Timestamp>(today()-8)) ,
luisa_moreno %>% filter(Timestamp>(today()-8)) ,
leidy_rojas %>% filter(Timestamp>(today()-8)) ,
karen_fernandez %>% filter(Timestamp>(today()-8)) ,
catalina_suarez %>% filter(Timestamp>(today()-8))
)
selected_data<-last_7_days %>%
drop_na(`Si quieres que te contactemos para profundizar sobre tu calificación, ¡déjanos tu número de celular porfa! (Opcional) - Sin espacios, sin símbolos ni +57`) %>%
arrange(across(Timestamp,desc))
#ss <- gs4_create("wish_contact_last_7_days", sheets = selected_data)
sheet_write(selected_data,ss="https://docs.google.com/spreadsheets/d/1CNdsejB5HRBYDAj6pajzfpjE60_BBSf2uA_KRWAkJPc/edit?usp=sharing",sheet="selected_data")
rm(list=ls())
library(googlesheets4)
library(dplyr)
library(lubridate)
library(tidyr)
nelson_rubio<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Nelson Rubio",
col_types = "Dnccc")
luz_dary_useche<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Luz Dary Useche",
col_types = "Dnccc")
jose_luis_alvarez<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Jose Luis Alvarez",
col_types = "Dnccc")
camilo_escobedo<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Camilo Escobedo",
col_types = "Dnccc")
tatiana_real<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Tatiana Real",
col_types = "Dnccc")
luisa_moreno<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Luisa Moreno",
col_types = "Dnccc")
leidy_rojas<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Leidy Rojas",
col_types = "Dnccc")
karen_fernandez<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Karen Fernandez",
col_types = "Dnccc")
catalina_suarez<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Catalina Suarez",
col_types = "Dnccc")
View(camilo_escobedo)
# homogenizando los nombres de las columnas
colnames(luz_dary_useche)<-colnames(nelson_rubio)
colnames(jose_luis_alvarez)<-colnames(nelson_rubio)
colnames(camilo_escobedo)<-colnames(nelson_rubio)
colnames(tatiana_real)<-colnames(nelson_rubio)
colnames(luisa_moreno)<-colnames(nelson_rubio)
colnames(leidy_rojas)<-colnames(nelson_rubio)
colnames(karen_fernandez)<-colnames(nelson_rubio)
colnames(catalina_suarez)<-colnames(nelson_rubio)
# creando columna nombre
nelson_rubio<-nelson_rubio %>% mutate(nombre= 'Nelson Rubio')
luz_dary_useche<-luz_dary_useche %>% mutate(nombre='Luz Dary Useche')
jose_luis_alvarez<-jose_luis_alvarez %>% mutate(nombre='Jose Luis Alvarez')
camilo_escobedo<-camilo_escobedo %>% mutate(nombre='Camilo Escobedo')
tatiana_real<-tatiana_real %>% mutate(nombre='Tatiana Real')
luisa_moreno<-luisa_moreno %>% mutate(nombre='Luisa Moreno')
leidy_rojas<-leidy_rojas %>% mutate(nombre='Leidy Rojas')
karen_fernandez<-karen_fernandez %>% mutate(nombre='Karen Fernandez')
catalina_suarez<-catalina_suarez %>% mutate(nombre='Catalina Suarez')
month(Timestamp)
# ultimos 7 dias
last_month<-bind_rows(
nelson_rubio,
luz_dary_useche,
jose_luis_alvarez,
camilo_escobedo,
tatiana_real,
luisa_moreno,
leidy_rojas,
karen_fernandez,
catalina_suarez
)
View(last_month)
View(last_month)
last_month %>% mutate(mes=month(Timestamp))
last_month<-last_month %>% mutate(mes=month(Timestamp))
View(last_month)
str(last_month)
last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`))
install.packages("ggplot")
install.packages("ggplot2")
library(ggplot2)
# str(last_month)
last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`))
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification)) + geom_line()
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=avg_calification)) + geom_line()+geom_text()
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification))) + geom_line()+geom_text()
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_line()+geom_text()
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_line()+geom_text(check_overlap = TRUE)
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_line()+geom_text()
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_line()+geom_text(hjust = 0, nudge_x = 0.05)
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_line()  + geom_text(hjust = 0, nudge_x = 0.05)  +
geom_label()
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_line()  +
geom_label()
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_line()  +
geom_label(hjust = 0, nudge_x = 0.05)
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_line()  +
geom_label()
last_month<-last_month %>% mutate(mes=month(Timestamp,label = TRUE))
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_line()  +
geom_label()
View(last_month)
last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`))
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_bar()  +
geom_label()
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_bar(stat = "identity")  +
geom_label()
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_area()  +
geom_label()
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_abline()  +
geom_label()
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_curve()  +
geom_label()
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_density()  +
geom_label()
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_line()  +
geom_label()
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_line(stat = "identity")  +
geom_label()
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_path()  +
geom_label()
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_step()  +
geom_label()
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_line(colour="red")  +
geom_label()
# str(last_month)
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_line()  +
geom_label()
View(last_month)
last_month %>% group_by(mes,nombre) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`))
# str(last_month)
ggplot( last_month %>% group_by(mes,nombre) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_line()  +
geom_label()
last_month %>% group_by(mes,nombre) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`))
last_month<-last_month %>% mutate(mes=month(Timestamp,label = TRUE))
# str(last_month)
ggplot( last_month %>% group_by(mes,nombre) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2))) + geom_line()  +
geom_label()
# str(last_month)
ggplot( last_month %>% group_by(mes,nombre) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=nombre)) + geom_line()  +
geom_label()
# creando base de datos por mes para todos los agentes segùn C-SAT promedio
last_month %>% group_by(mes,nombre) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`))
# creando mes en formato string orderder
last_month<-last_month %>% mutate(mes=trunc.Date(Timestamp,"months"))
# creando base de datos por mes para todos los agentes segùn C-SAT promedio
last_month %>% group_by(mes,nombre) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`))
ggplot( last_month %>% group_by(mes,nombre) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=nombre)) + geom_line()  +
geom_label()
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2 ))) + geom_line()  +
geom_label()
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2 ))) + geom_line()  +
geom_label()  + labs(x="",y="",title = "C-SAT promedio por mes")
# creando base de datos por mes para todos los agentes segùn C-SAT promedio
last_month %>% group_by(mes,nombre) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`))
last_month %>% group_by(mes,nombre) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`))
# creando base de datos por mes para todos los agentes segùn C-SAT promedio
historic_data_by_agent<-last_month %>% group_by(mes,nombre) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`))
# creando base de datos por mes para todos los agentes segùn C-SAT promedio
historic_data_by_agent<-last_month %>% group_by(mes,nombre) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`))
# dibujo de C-SAT promedio por mes para todo el equipo
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2 ))) + geom_line()  +
geom_label()  + labs(x="",y="",title = "C-SAT promedio por mes")
sheet_write(historic_data_by_agent,ss="https://docs.google.com/spreadsheets/d/1CNdsejB5HRBYDAj6pajzfpjE60_BBSf2uA_KRWAkJPc/edit?usp=sharing",sheet="historic_data_by_agent")
# creando base de datos por mes para todos los agentes segùn C-SAT promedio
historic_data_by_agent<-last_month %>% group_by(mes,nombre) %>%
summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`),
cantidad=count(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`))
# creando base de datos por mes para todos los agentes segùn C-SAT promedio
historic_data_by_agent<-last_month %>% group_by(mes,nombre) %>%
summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`),
cantidad=count(Timestamp))
View(last_month)
# creando base de datos por mes para todos los agentes segùn C-SAT promedio
historic_data_by_agent<-last_month %>% group_by(mes,nombre) %>%
summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`),
cantidad=count(`¿Consideras que Nelson resolvió tus inquietudes?`))
# creando base de datos por mes para todos los agentes segùn C-SAT promedio
historic_data_by_agent<-last_month %>% group_by(mes,nombre) %>%
summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`),
cantidad=count(mes))
# creando base de datos por mes para todos los agentes segùn C-SAT promedio
historic_data_by_agent<-last_month %>% group_by(mes,nombre) %>%
summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`))
last_month %>% group_by(mes,nombre) %>%
summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`))
last_month %>% group_by(mes,nombre) %>%
summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`),
cantidad=count(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`))
last_month %>% group_by(mes,nombre)
last_month %>% group_by(mes,nombre) %>%
summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`),
cantidad=count(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`))
# creando base de datos por mes para todos los agentes segùn C-SAT promedio
historic_data_by_agent<-last_month %>% group_by(mes,nombre) %>%
summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`))
last_month %>% group_by(mes,nombre) %>%
summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`))
# creando base de datos por mes para todos los agentes segùn C-SAT promedio
historic_data_by_agent<-
last_month %>% group_by(mes,nombre) %>%
summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`),
cantidad=n(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`))
last_month %>% group_by(mes,nombre) %>%
summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`),
cantidad=n(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`))
last_month %>% group_by(mes,nombre) %>%
summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`),
cantidad=n(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`))
last_month %>% group_by(mes,nombre) %>%
summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`),
cantidad=n(Timestamp))
# creando base de datos por mes para todos los agentes segùn C-SAT promedio
historic_data_by_agent<-
last_month %>% group_by(mes,nombre) %>%
summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`),
cantidad=n())
last_month %>% group_by(mes,nombre) %>%
summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`),
cantidad=n())
# creando base de datos por mes para todos los agentes segùn C-SAT promedio
historic_data_by_agent<-last_month %>% group_by(mes,nombre) %>%
summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`),
cantidad=n())
View(historic_data_by_agent)
sheet_write(historic_data_by_agent,ss="https://docs.google.com/spreadsheets/d/1CNdsejB5HRBYDAj6pajzfpjE60_BBSf2uA_KRWAkJPc/edit?usp=sharing",sheet="historic_data_by_agent")
rm(list=ls())
# reading C-SAT data from googlesheets
# install.packages("googlesheets4")
library(googlesheets4)
library(dplyr)
library(lubridate)
library(tidyr)
# tal parece que los nombres de los sheets no pueden contener tildes o falla la lectura mediante gs4
# name_of_sheets<-sheet_names("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing")
nelson_rubio<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Nelson Rubio",
col_types = "Dnccc")
luz_dary_useche<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Luz Dary Useche",
col_types = "Dnccc")
jose_luis_alvarez<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Jose Luis Alvarez",
col_types = "Dnccc")
camilo_escobedo<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Camilo Escobedo",
col_types = "Dnccc")
tatiana_real<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Tatiana Real",
col_types = "Dnccc")
luisa_moreno<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Luisa Moreno",
col_types = "Dnccc")
leidy_rojas<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Leidy Rojas",
col_types = "Dnccc")
karen_fernandez<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Karen Fernandez",
col_types = "Dnccc")
catalina_suarez<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Catalina Suarez",
col_types = "Dnccc")
# homogenizando los nombres de las columnas
colnames(luz_dary_useche)<-colnames(nelson_rubio)
colnames(jose_luis_alvarez)<-colnames(nelson_rubio)
colnames(camilo_escobedo)<-colnames(nelson_rubio)
colnames(tatiana_real)<-colnames(nelson_rubio)
colnames(luisa_moreno)<-colnames(nelson_rubio)
colnames(leidy_rojas)<-colnames(nelson_rubio)
colnames(karen_fernandez)<-colnames(nelson_rubio)
colnames(catalina_suarez)<-colnames(nelson_rubio)
# creando columna nombre
nelson_rubio<-nelson_rubio %>% mutate(nombre= 'Nelson Rubio')
luz_dary_useche<-luz_dary_useche %>% mutate(nombre='Luz Dary Useche')
jose_luis_alvarez<-jose_luis_alvarez %>% mutate(nombre='Jose Luis Alvarez')
camilo_escobedo<-camilo_escobedo %>% mutate(nombre='Camilo Escobedo')
tatiana_real<-tatiana_real %>% mutate(nombre='Tatiana Real')
luisa_moreno<-luisa_moreno %>% mutate(nombre='Luisa Moreno')
leidy_rojas<-leidy_rojas %>% mutate(nombre='Leidy Rojas')
karen_fernandez<-karen_fernandez %>% mutate(nombre='Karen Fernandez')
catalina_suarez<-catalina_suarez %>% mutate(nombre='Catalina Suarez')
# ultimos 7 dias
last_7_days<-bind_rows(
nelson_rubio %>% filter(Timestamp>(today()-8)) ,
luz_dary_useche %>% filter(Timestamp>(today()-8)) ,
jose_luis_alvarez %>% filter(Timestamp>(today()-8)) ,
camilo_escobedo %>% filter(Timestamp>(today()-8)) ,
tatiana_real %>% filter(Timestamp>(today()-8)) ,
luisa_moreno %>% filter(Timestamp>(today()-8)) ,
leidy_rojas %>% filter(Timestamp>(today()-8)) ,
karen_fernandez %>% filter(Timestamp>(today()-8)) ,
catalina_suarez %>% filter(Timestamp>(today()-8))
)
selected_data<-last_7_days %>%
drop_na(`Si quieres que te contactemos para profundizar sobre tu calificación, ¡déjanos tu número de celular porfa! (Opcional) - Sin espacios, sin símbolos ni +57`) %>%
arrange(across(Timestamp,desc))
#ss <- gs4_create("wish_contact_last_7_days", sheets = selected_data)
sheet_write(selected_data,ss="https://docs.google.com/spreadsheets/d/1CNdsejB5HRBYDAj6pajzfpjE60_BBSf2uA_KRWAkJPc/edit?usp=sharing",sheet="selected_data")
rm(list=ls())
library(RPostgreSQL)
install.packages("RPostgreSQL")
library(RPostgreSQL)
install.packages("RPostgreSQL")
library(RPostgreSQL)
# install.packages("RPostgreSQL")
library(RPostgreSQL)
drv<-dbDriver("aflore-read-only")
drv<-dbDriver("aflore-read-only")
# install.packages("RPostgreSQL")
library(RPostgreSQL)
drv<-dbDriver("aflore-read-only")
drv<-dbDriver("aflore-prod")
# drv<-dbDriver("aflore-prod")
conexion <- dbConnect(drv,dbname="aflore-read-only",
host="afloreprodinstance.cfkkiii2ach9.us-east-1.rds.amazonaws.com",port=5432,
user="labarrios",password="Ub3uM#C!StpPer6Z!Q9")
# drv<-dbDriver("aflore-prod")
conexion <- dbConnect(dbname="aflore-read-only",
host="afloreprodinstance.cfkkiii2ach9.us-east-1.rds.amazonaws.com",port=5432,
user="labarrios",password="Ub3uM#C!StpPer6Z!Q9")
drv<-dbDriver("aflore-prod")
drv<-dbDriver("PostgreSQL")
conexion <- dbConnect(drv,dbname="aflore-read-only",
host="afloreprodinstance.cfkkiii2ach9.us-east-1.rds.amazonaws.com",port=5432,
user="labarrios",password="Ub3uM#C!StpPer6Z!Q9")
conexion <- dbConnect(drv,dbname="aflore-prod",
host="afloreprodinstance.cfkkiii2ach9.us-east-1.rds.amazonaws.com",port=5432,
user="labarrios",password="Ub3uM#C!StpPer6Z!Q9")
library(googlesheets4)
library(dplyr)
library(lubridate)
library(tidyr)
library(ggplot2)
# name_of_sheets<-sheet_names("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing")
nelson_rubio<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Nelson Rubio",
col_types = "Dnccc")
1  # este 1 es para seleccionar el perfil de google pre configurado, no borrar
luz_dary_useche<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Luz Dary Useche",
col_types = "Dnccc")
jose_luis_alvarez<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Jose Luis Alvarez",
col_types = "Dnccc")
camilo_escobedo<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Camilo Escobedo",
col_types = "Dnccc")
tatiana_real<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Tatiana Real",
col_types = "Dnccc")
luisa_moreno<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Luisa Moreno",
col_types = "Dnccc")
leidy_rojas<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Leidy Rojas",
col_types = "Dnccc")
karen_fernandez<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Karen Fernandez",
col_types = "Dnccc")
catalina_suarez<-range_read("https://docs.google.com/spreadsheets/d/12VXX9J2UixC3IWMwmwzoGXgRCWl8KoONXS2t_bEqeEM/edit?usp=sharing",sheet = "Catalina Suarez",
col_types = "Dnccc")
# homogenizando los nombres de las columnas
colnames(luz_dary_useche)<-colnames(nelson_rubio)
colnames(jose_luis_alvarez)<-colnames(nelson_rubio)
colnames(camilo_escobedo)<-colnames(nelson_rubio)
colnames(tatiana_real)<-colnames(nelson_rubio)
colnames(luisa_moreno)<-colnames(nelson_rubio)
colnames(leidy_rojas)<-colnames(nelson_rubio)
colnames(karen_fernandez)<-colnames(nelson_rubio)
colnames(catalina_suarez)<-colnames(nelson_rubio)
nelson_rubio<-nelson_rubio %>% mutate(nombre= 'Nelson Rubio')
luz_dary_useche<-luz_dary_useche %>% mutate(nombre='Luz Dary Useche')
jose_luis_alvarez<-jose_luis_alvarez %>% mutate(nombre='Jose Luis Alvarez')
camilo_escobedo<-camilo_escobedo %>% mutate(nombre='Camilo Escobedo')
tatiana_real<-tatiana_real %>% mutate(nombre='Tatiana Real')
luisa_moreno<-luisa_moreno %>% mutate(nombre='Luisa Moreno')
leidy_rojas<-leidy_rojas %>% mutate(nombre='Leidy Rojas')
karen_fernandez<-karen_fernandez %>% mutate(nombre='Karen Fernandez')
catalina_suarez<-catalina_suarez %>% mutate(nombre='Catalina Suarez')
# data total unida
last_month<-bind_rows(
nelson_rubio,
luz_dary_useche,
jose_luis_alvarez,
camilo_escobedo,
tatiana_real,
luisa_moreno,
leidy_rojas,
karen_fernandez,
catalina_suarez
)
# creando mes con funciòn similar a date_trunc
last_month<-last_month %>% mutate(mes=trunc.Date(Timestamp,"months"))
# creando base de datos por mes para todos los agentes segùn C-SAT promedio
historic_data_by_agent<-last_month %>% group_by(mes,nombre) %>%
summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`),
cantidad=n())
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,2 ))) + geom_line()  +
geom_label()  + labs(x="",y="",title = "C-SAT promedio por mes")
# dibujo de C-SAT promedio por mes para todo el equipo
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,1 ))) + geom_line()  +
geom_label()  + labs(x="",y="",title = "C-SAT promedio por mes")
# dibujo de C-SAT promedio por mes para todo el equipo
ggplot( last_month %>% group_by(mes) %>% summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`)) ,
aes(x=mes,y=avg_calification,label=round(avg_calification,1 ))) + geom_line()  +
geom_label()  + labs(x="",y="",title = "C-SAT")
# creando base de datos por mes para todos los agentes segùn C-SAT promedio
historic_data_by_agent<-last_month %>% group_by(mes,nombre) %>%
summarise(avg_calification=mean(`¿Cómo calificarías la atención que te dio Nelson de Aflore?`),
cantidad=n())
sheet_write(historic_data_by_agent,ss="https://docs.google.com/spreadsheets/d/1CNdsejB5HRBYDAj6pajzfpjE60_BBSf2uA_KRWAkJPc/edit?usp=sharing",sheet="historic_data_by_agent")
rm(list=ls())
